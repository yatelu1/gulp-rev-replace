console.log(22),ddd,angular.module("fullstakApp").controller("BaseInfoCtrl",function(e,o,t,n,l,s,a,r,i,u){e.flagType=[{value:16,text:"grass_driving_range"},{value:0,text:"mat_driving_range"},{value:1,text:"putting_green"},{value:2,text:"chipping_green"},{value:3,text:"practice_bunker"},{value:4,text:"motor_cart"},{value:5,text:"pull_cart"},{value:6,text:"golf_club_rental"},{value:7,text:"club_fitting"},{value:8,text:"pro_shop"},{value:9,text:"golf_lessons"},{value:10,text:"caddie_hire"},{value:11,text:"restaurant"},{value:12,text:"receptions"},{value:13,text:"changing_room"},{value:14,text:"locker_room"},{value:15,text:"lodging"}],e.fileName="No file selected...",$("#roleName").text(i.name),e.getGeo=function(){var o,t=new google.maps.Geocoder;o=void 0!==e.club.postCode||""!==e.club.postCode?e.club.address+","+e.club.postCode:e.curCountry+","+e.curState+","+e.curCity+","+e.club.address,t.geocode({address:o},function(o,t){t===google.maps.GeocoderStatus.OK?e.$apply(function(){var t=new google.maps.LatLng(o[0].geometry.location.lat(),o[0].geometry.location.lng());e.map.markers[1]?e.map.markers[1].setPosition(t):e.map.markers[1]=new google.maps.Marker({position:t,map:e.map,icon:"/GPS2/static/assets/static/center.png",draggable:!1,animation:google.maps.Animation.DROP});var n=new google.maps.LatLngBounds;for(var l in e.map.markers){var s=e.map.markers[l].position;n.extend(s)}e.map.fitBounds(n)}):e.msg="Geocode was not successful for the following reason: "+t}),$("#getGeo").hide()},e.setPin=function(){var o,t=new google.maps.Geocoder;o=void 0!==e.club.postCode||""!==e.club.postCode?e.club.address+","+e.club.postCode:e.curCountry+","+e.curState+","+e.curCity+","+e.club.address,t.geocode({address:o},function(o,t){t===google.maps.GeocoderStatus.OK?e.$apply(function(){e.club.geoPoint.latitude=o[0].geometry.location.lat(),e.club.geoPoint.longitude=o[0].geometry.location.lng();var t=new google.maps.LatLng(o[0].geometry.location.lat(),o[0].geometry.location.lng());e.map.setCenter(t),e.map.markers[0].setPosition(t)}):e.msg="Geocode was not successful for the following reason: "+t})},$("#address").on("input",function(){$("#getGeo").show()}),e.map=[],e.flags=[],e.noteFlags=[],e.$on("mapInitialized",function(o,t){var n=t.index;e.map[n]=t});var d=s.id,c=n,g=c.search();"ADMIN"===i.role?e.watchMode=!0:e.watchMode=!1,"admin admin"===i.name&&(e.superAdmin=!0),e.updateState=function(o){r({url:l.get("adminApi.endpoint")+"/getCountryRegionCities?request={countryId:{id:"+o+"}}",cache:!0}).success(function(o){e.regionCities=o.regions})},e.updateCity=function(o){r({url:l.get("adminApi.endpoint")+"/getCountryRegionCities?request={regionId:{id:"+o+"}}",cache:!0}).success(function(o){e.cities=o.cities})},"newClub"===g.type?o.all([r({method:"POST",url:l.get("adminApi.endpoint")+"/manageClub2InfoDraft",data:JSON.stringify({operation:"NEW"}),withCredentials:!0,headers:{"Content-Type":"application/json",Token:i.Token}}),r({url:l.get("adminApi.endpoint")+"/getCountryRegionCities",cache:!0})]).then(function(o,t){e.afterLoad=!0;var n=o[0].data.clubInfo,s=o[1].data.countries;e.scorecardImages=o[0].data.scorecardImages,n.countryId={},n.regionId={},n.cityId={},n.countryId.id="4",n.regionId.id="",n.cityId.id="",n.geoPoint={},n.tees=[],n.geoPoint.latitude=35.784,n.geoPoint.longitude=-78.67,e.updateState(n.countryId.id),$("#country").on("change",function(){$("#state").val(""),$("#city").val("")}),e.club=n,e.countries=s,e.imgLink=l.get("imgLink.endpoint"),e.clubConf=u.flagType;var r=new google.maps.LatLng(n.geoPoint.latitude,n.geoPoint.longitude);e.mapRest=function(){a(function(){e.map[0]&&e.map[0].markers[0]&&(e.map[0].setCenter(r),e.map[0].markers[0].setPosition(r))},1e3)},e.mapRest()}):(e.showOverviewBtn=!0,o.all([r({url:l.get("adminApi.endpoint")+"/getClub2Info?request={clubId:{id:%27"+d+"%27}}",headers:{Token:i.Token}}),r({url:l.get("adminApi.endpoint")+"/getCountryRegionCities",cache:!0})]).then(function(o,t){function n(e){return"OFFICIAL"===e?"Official":"THIRD_PARTY"===e?"3rd party":"NOT_AVAILABLE"===e?"Not available":"--"}e.afterLoad=!0;var s,r=o[0].data.clubInfoDraft;s=r?o[0].data.clubInfoDraft.clubInfo:o[0].data.clubInfo;var i=o[1].data.countries,d=o[0].data.clubStatus,c=o[0].data.callerName;d.submittingNote=d.submittingNote?d.submittingNote:{},d.editingStep=d.editingStep?d.editingStep:{};var g=d.submittingNote.note?d.submittingNote.note:"";e.scorecardNote=d.submittingNote.scorecardNote?d.submittingNote.scorecardNote:"",e.layoutNote=d.submittingNote.layoutNote?d.submittingNote.layoutNote:"",e.ratingsNote=d.submittingNote.ratingsNote?d.submittingNote.ratingsNote:"",e.refused={value:d.submittingNote.refused?!0:!1},e.stepType=d.editingStep.stepType?d.editingStep.stepType:"",e.noteSaveText=d.editingStep.note?d.editingStep.note:"",e.scorecardImages=o[0].data.scorecardImages,e.scorecardNoteDisplay=n(e.scorecardNote),e.layoutNoteDisplay=n(e.layoutNote),e.ratingsNoteDisplay=n(e.ratingsNote);for(var h=s.flag,f=0;17>f;f++)(h&1<<f)===1<<f&&e.flags.push(f);for(var p=d.noteFlag,f=0;9>f;f++)(p&1<<f)===1<<f&&e.noteFlags.push(f);if(void 0!==s.phone&&12===s.phone.length&&/\+1/.test(s.phone)){var m=s.phone,b=m.substring(0,2),I=m.substring(2,5),v=m.substring(5,8),M=m.substring(8);s.phone=b+" ("+I+") "+v+"-"+M}void 0!==s.website&&"http"===s.website.substring(0,4)?s.formattedWebsite=s.website:s.formattedWebsite="http://"+s.website,void 0===s.countryId&&(s.countryId={},s.countryId.id=""),void 0===s.regionId&&(s.regionId={},s.regionId.id=""),void 0===s.cityId&&(s.cityId={},s.cityId.id=""),void 0===s.tees&&(s.tees=[]),$("#country").on("change",function(){$("#state").val(""),$("#city").val("")}),e.updateState(s.countryId.id),e.updateCity(s.regionId.id),e.club=s,e.clubStatus=d,e.callerName=c,e.callerCheck={value:!1},e.noteText=g,e.overviewNote=d.overviewNote,e.countries=i,e.imgLink=l.get("imgLink.endpoint"),e.clubConf=u.flagType;var S=new google.maps.LatLng(s.geoPoint.latitude,s.geoPoint.longitude);if(e.mapRest=function(){a(function(){e.map[0]&&e.map[0].markers[0]&&(e.map[0].setCenter(S),e.map[0].markers[0].setPosition(S))},1e3)},e.mapRest(),void 0!==e.club.holeSet2Infos)for(var f=0;f<e.club.holeSet2Infos.length;f++)for(var k=e.club.holeSet2Infos[f],y=0;y<k.teeInfos.length;y++)void 0===k.teeInfos[y].yardages&&(k.teeInfos[y].yardages=[0,0,0,0,0,0,0,0,0]);for(var w=0;w<s.holes.length;w++)for(var P=s.holes[w].geoPoints,C=0;C<P.length;C++){null===P[C]&&(P[C]={longitude:s.geoPoint.longitude,latitude:s.geoPoint.latitude});for(var x=6;8>=x;x++)void 0===P[x]&&(P[x]={longitude:s.geoPoint.longitude,latitude:s.geoPoint.latitude})}})),e.dragend=function(o){var t=o.latLng.lat(),n=o.latLng.lng();e.club.geoPoint.latitude=t,e.club.geoPoint.longitude=n},e.onFileSelect=function(o){e.fileName=o[0].name;for(var n=0;n<o.length;n++){var s=o[n];e.upload=t.upload({url:l.get("adminApi.endpoint")+"/uploadImage",data:{request:JSON.stringify({clubId:{id:e.club.id.id},imageType:"CLUB_SCORECARD"})},file:s}).progress(function(e){}).success(function(o,t,n,l){e.fileName="",e.scorecardImages?e.scorecardImages.push({id:o.imageId.id}):e.scorecardImages=[{id:o.imageId.id}]})}},e.deleteScoreCard=function(o,t){var n=window.confirm("Are you sure to delete?");n===!0&&r({method:"POST",url:l.get("adminApi.endpoint")+"/deleteImage",data:JSON.stringify({clubId:{id:e.club.id.id},imageType:"CLUB_SCORECARD",scoreCardImageId:{id:t}})}).success(function(t,n,l,s){e.scorecardImages.splice(o,1)}).error(function(e,o,t,n){})},e.totalPar=function(o,t){for(var n=0,l=0;8>=l;l++)"undefined"!=typeof e.club.holes[e.club.holeSet2Infos[o].holeIndexes[l]]&&(n+=0===t?parseInt(e.club.holes[e.club.holeSet2Infos[o].holeIndexes[l]].menPar):parseInt(e.club.holes[e.club.holeSet2Infos[o].holeIndexes[l]].ladiesPar));return n},e.totalHandicap=function(o,t){for(var n=0,l=0;8>=l;l++)"undefined"!=typeof e.club.holes[e.club.holeSet2Infos[o].holeIndexes[l]]&&(n+=0===t?parseInt(e.club.holes[e.club.holeSet2Infos[o].holeIndexes[l]].menHandicap):parseInt(e.club.holes[e.club.holeSet2Infos[o].holeIndexes[l]].ladiesHandicap));return n},e.courseTotalPar=function(o,t){for(var n=0,l=0;l<e.club.holeSet2Infos.length;l++)if(o===e.club.holeSet2Infos[l].name)for(var s=0;8>=s;s++)"undefined"!=typeof e.club.holes[e.club.holeSet2Infos[l].holeIndexes[s]]&&(n+=0===t?parseInt(e.club.holes[e.club.holeSet2Infos[l].holeIndexes[s]].menPar):parseInt(e.club.holes[e.club.holeSet2Infos[l].holeIndexes[s]].ladiesPar));return n},e.courseTotalHandicap=function(o,t){for(var n=0,l=0;l<e.club.holeSet2Infos.length;l++)if(o===e.club.holeSet2Infos[l].name)for(var s=0;8>=s;s++)"undefined"!=typeof e.club.holes[e.club.holeSet2Infos[l].holeIndexes[s]]&&(n+=0===t?parseInt(e.club.holes[e.club.holeSet2Infos[l].holeIndexes[s]].menHandicap):parseInt(e.club.holes[e.club.holeSet2Infos[l].holeIndexes[s]].ladiesHandicap));return n},e.deleteClubHoleSet=function(o){var t=window.confirm("Are you sure to delete?");if(t===!0&&(e.club.holeSet2Infos.splice(o,1),e.myMaps.splice(o,1),void 0!==e.club.courseInfos))for(var n=0;n<e.club.courseInfos.length;n++)for(var l=e.club.courseInfos[n],s=0;s<l.holeSetIndexes.length;s++){var a=l.holeSetIndexes[s];a===o&&(l.holeSetIndexes.splice(s,1),l.holeCount=9*l.holeSetIndexes.length)}},e.delTee=function(o){var t=window.confirm("Are you sure to delete?");if(t===!0){for(var n=0;n<e.club.holeSet2Infos.length;n++){var l=e.club.holeSet2Infos[n];if("undefined"==typeof l.teeInfos)return;for(var s=0;s<l.teeInfos.length;s++)if(s===o){l.teeInfos.splice(s,1);break}}e.refreshCourse()}},e.addTee=function(){for(var o=0;o<e.club.holeSet2Infos.length;o++){var t=e.club.holeSet2Infos[o];"undefined"==typeof t.teeInfos&&(t.teeInfos=[]),t.teeInfos.push({name:"Name",gender:"",tcr:0,tsl:0,yardages:[0,0,0,0,0,0,0,0,0],isnew:!0})}for(var n=0;n<e.club.courseInfos.length;n++){var t=e.club.courseInfos[n];"undefined"==typeof t.teeInfos&&(t.teeInfos=[]),t.teeInfos.push({name:"Name",gender:"",tcr:0,tsl:0,yardages:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]})}},e.getHoleSet=function(o,t,n){for(var l=0;l<e.club.holeSet2Infos.length;l++)for(var s=0;s<e.club.holeSet2Infos[l].teeInfos.length;s++)if(o===e.club.holeSet2Infos[l].name&&t===e.club.holeSet2Infos[l].teeInfos[s].gender&&n===e.club.holeSet2Infos[l].teeInfos[s].name)return e.club.holeSet2Infos[l].teeInfos[s]},e.totalHoleSet=function(o,t,n){for(var l=0,s=0;s<e.club.holeSet2Infos.length;s++)for(var a=0;a<e.club.holeSet2Infos[s].teeInfos.length;a++)if(o===e.club.holeSet2Infos[s].name&&t===e.club.holeSet2Infos[s].teeInfos[a].gender&&n===e.club.holeSet2Infos[s].teeInfos[a].name)for(var r=0;8>=r;r++){if("undefined"==typeof e.club.holeSet2Infos[s].teeInfos[a].yardages)return;l+=parseInt(e.club.holeSet2Infos[s].teeInfos[a].yardages[r])}return l},e.addClubHoleSet=function(){var o={},t={};o.name="",o.isNewSet=!0;var n=e.club.holes?e.club.holes.length:0;o.holeIndexes=[],o.teeInfos=[];for(var l=0;9>l;l++)o.holeIndexes.push(n),n++;for(var s=0;9>s;s++){t[s]={geoPoints:[],menPar:0,ladiesPar:0,menHandicap:0,ladiesHandicap:0};for(var a=0;9>a;a++)t[s].geoPoints[a]={longitude:e.club.geoPoint.longitude,latitude:e.club.geoPoint.latitude};e.club.holes?e.club.holes.push(t[s]):e.club.holes=[t[s]]}if(void 0===e.club.holeSet2Infos||0===e.club.holeSet2Infos.length)o.teeInfos=[];else{o.teeInfos=JSON.parse(JSON.stringify(e.club.holeSet2Infos[0].teeInfos));for(var r=0;r<o.teeInfos.length;r++)o.teeInfos[r].tcr=0,o.teeInfos[r].tsl=0,o.teeInfos[r].yardages=[0,0,0,0,0,0,0,0,0]}e.club.holeSet2Infos?e.club.holeSet2Infos.push(o):e.club.holeSet2Infos=[o];var i=e.club.holeSet2Infos.length,u=setInterval(function(){var e=$(".category")[i-1];e&&(angular.element("body").animate({scrollTop:$(e).offset().top-80},300),$($(e).find("a")[0]).trigger("click"),clearInterval(u))},200)},e.copyClubHoleSet=function(o){var t={},n={};t.name=e.club.holeSet2Infos[o].name,t.isNewSet=!0;var l=e.club.holes?e.club.holes.length:0;t.holeIndexes=[],t.teeInfos=[];for(var s=0;9>s;s++)t.holeIndexes.push(l),l++;for(var a=0;9>a;a++)n[a]=JSON.parse(JSON.stringify(e.club.holes[e.club.holeSet2Infos[o].holeIndexes[a]])),e.club.holes?e.club.holes.push(n[a]):e.club.holes=[n[a]];t.teeInfos=JSON.parse(JSON.stringify(e.club.holeSet2Infos[o].teeInfos)),e.club.holeSet2Infos?e.club.holeSet2Infos.push(t):e.club.holeSet2Infos=[t];var r=e.club.holeSet2Infos.length,i=setInterval(function(){var e=$(".category")[r-1];e&&(angular.element("body").animate({scrollTop:$(e).offset().top-80},300),$($(e).find("a")[0]).trigger("click"),clearInterval(i))},200)},e.delCourse=function(o){var t=window.confirm("Are you sure to delete?");t===!0&&e.club.courseInfos.splice(o,1)},e.addCourse=function(){if(void 0===e.club.holeSet2Infos)return void(e.msg="you should set the holeset first");var o={};if(o.name="",o.holeCount=0,o.holeSetIndexes=[],void 0===e.club.holeSet2Infos||0===e.club.holeSet2Infos.length)o.teeInfos=[];else{o.teeInfos=[],o.teeInfos=JSON.parse(JSON.stringify(e.club.holeSet2Infos[0].teeInfos));for(var t=0;t<o.teeInfos.length;t++)o.teeInfos[t].tcr=0,o.teeInfos[t].tsl=0,delete o.teeInfos[t].yardages}e.club.courseInfos?e.club.courseInfos.push(o):e.club.courseInfos=[o];var n=e.club.courseInfos.length,l=setInterval(function(){var e=$(".course")[n-1];e&&(angular.element("body").animate({scrollTop:$(e).offset().top-80},300),clearInterval(l))},200)},e.upHoleSet=function(o){if(1!==e.club.courseInfos[o].holeSetIndexes.length){var t=e.club.courseInfos[o].holeSetIndexes[0],n=e.club.courseInfos[o].holeSetIndexes[1];e.club.courseInfos[o].holeSetIndexes[0]=n,e.club.courseInfos[o].holeSetIndexes[1]=t}},e.delHoleSet=function(o){if("undefined"!=typeof e.holeSetSelection[o].right){if(void 0!==e.club.courseInfos[o].holeSetIndexes[0]){var t=e.club.holeSet2Infos[e.club.courseInfos[o].holeSetIndexes[0]].name;"undefined"!=t&&t===e.holeSetSelection[o].right[0]&&e.club.courseInfos[o].holeSetIndexes.splice(0,1)}if(void 0!==e.club.courseInfos[o].holeSetIndexes[1]){var n=e.club.holeSet2Infos[e.club.courseInfos[o].holeSetIndexes[1]].name;"undefined"!=n&&n===e.holeSetSelection[o].right[0]&&e.club.courseInfos[o].holeSetIndexes.splice(1,1)}e.countHoles(o),e.refreshCourseTee(o)}},e.addHoleSet=function(o){if("undefined"!=typeof e.holeSetSelection[o].left){for(var t,n=0;n<e.club.holeSet2Infos.length;n++)if(e.club.holeSet2Infos[n].name===e.holeSetSelection[o].left[0]){t=n;break}1===$(".holeSetSelectionRight:eq("+o+") option:selected").index()?e.club.courseInfos[o].holeSetIndexes[1]=t:e.club.courseInfos[o].holeSetIndexes[0]=t,e.refreshCourseTee(o),e.countHoles(o)}},e.countHoles=function(o){var t,n;t=void 0!==e.club.courseInfos[o].holeSetIndexes[0]?9:0,n=void 0!==e.club.courseInfos[o].holeSetIndexes[1]?9:0,e.club.courseInfos[o].holeCount=parseInt(t)+parseInt(n)},e.refreshOthers=function(o,t){for(var n=0;n<e.club.holeSet2Infos.length;n++){var l=e.club.holeSet2Infos[n];l.teeInfos[o].name=t}if(void 0!==e.club.courseInfos)for(var s=0;s<e.club.courseInfos.length;s++){var a=e.club.courseInfos[s];a.teeInfos[o].name=t}},e.refreshOtherGender=function(o,t){for(var n=0;n<e.club.holeSet2Infos.length;n++){var l=e.club.holeSet2Infos[n];l.teeInfos[o].gender=t}for(var s=0;s<e.club.courseInfos.length;s++){var a=e.club.courseInfos[s];a.teeInfos[o].gender=t}},e.refreshCourse=function(){for(var o=0;o<e.club.courseInfos.length;o++)e.refreshCourseTee(o)},e.refreshCourseTee=function(o){var t=e.club.courseInfos[o],n={},l={},s=0;e.courseRating=e.courseRating||{};for(var a=0;a<e.club.holeSet2Infos.length;a++){var r=e.club.holeSet2Infos[a];if(void 0===e.club.holeSet2Infos[t.holeSetIndexes[0]])return;if(r.name===e.club.holeSet2Infos[t.holeSetIndexes[0]].name&&(s=1|s),void 0===e.club.holeSet2Infos[t.holeSetIndexes[1]])return;r.name===e.club.holeSet2Infos[t.holeSetIndexes[1]].name&&(s=2|s);for(var i=r.teeInfos,u=0;u<i.length;u++){var d=i[u];"undefined"==typeof n[d.name+"-"+d.gender]&&(n[d.name+"-"+d.gender]=1,l[d.name+"-"+d.gender]=d)}}var c=2;1!==(1&s)&&(t.holeSetIndexes[0]=void 0,c--),2!==(2&s)&&(t.holeSetIndexes[1]=void 0,c--),void 0===t.teeInfos&&(t.teeInfos=e.club.tees);for(var a=t.teeInfos.length-1;a>=0;a--){var g=t.teeInfos[a];e.courseRating[g.name+"-"+g.gender]=g,n[g.name+"-"+g.gender]>=c?n[g.name+"-"+g.gender]=0:t.teeInfos.splice(a,1)}for(var h in n){var f=h.split("-"),p=f[0],m=f[1],b=l[p+"-"+m],I=!0;for(a=0;a<t.teeInfos.length;a++){var g=t.teeInfos[a];g.name===b.name&&g.gender===b.gender&&(I=!1)}I&&t.teeInfos.push({name:b.name,gender:b.gender,tcr:0,tsl:0,yardages:b.yardages})}},e.save=function(o){for(var t=0,n=0;n<e.flags.length;n++)t|=1<<e.flags[n];e.club.flag=t,e.startProcess(),e.submitted=!0,r({method:"POST",url:l.get("adminApi.endpoint")+"/manageClub2InfoDraft",data:JSON.stringify({operation:o,clubInfo:e.club,editingStep:{stepType:e.stepType,note:e.noteSaveText}}),withCredentials:!0,headers:{"Content-Type":"application/json",Token:i.Token}}).success(function(o,t,n,l){e.stopProcess(),$("#myModalSave").modal("hide"),200===t?void 0===o.error?e.msg="save success":e.msg=o.error:e.msg=o.code}).error(function(o,t,n,l){e.stopProcess(),e.msg="Network Error "+t})},e.submit=function(){for(var o,t=0,n=0;n<e.flags.length;n++)t|=1<<e.flags[n];e.club.flag=t,o=e.callerCheck.value?"TRANSFER":"SUBMIT",e.startProcess(),e.submitted=!0,r({method:"POST",url:l.get("adminApi.endpoint")+"/manageClub2InfoDraft",data:JSON.stringify({operation:o,clubInfo:e.club,submittingNote:{scorecardNote:e.scorecardNote,layoutNote:e.layoutNote,ratingsNote:e.ratingsNote,note:e.noteText,refused:e.refused.value}}),withCredentials:!0,headers:{"Content-Type":"application/json",Token:i.Token}}).success(function(o,t,n,l){e.stopProcess(),$("#myModal").modal("hide"),200===t?void 0===o.error?e.msg="submit success":e.msg=o.error:e.msg=o.code}).error(function(o,t,n,l){e.stopProcess(),e.msg="Network Error "+t})},e.deleteClub=function(){var o=window.confirm("Are you sure to delete?");o===!0&&r({method:"POST",url:l.get("adminApi.endpoint")+"/deleteClub",data:JSON.stringify({clubId:{id:e.club.id.id}}),withCredentials:!0,headers:{"Content-Type":"application/json",Token:i.Token}}).success(function(o,t,n,l){o.error?e.msg=o.error:location.href="/GPS2/list/listAdminClub"})},e.disCardClubDraft=function(){var o=window.confirm("Are you sure to disCard?");o===!0&&r({method:"POST",url:l.get("adminApi.endpoint")+"/manageClub2InfoDraft",data:JSON.stringify({operation:"DELETE",clubId:{id:e.club.id.id}}),withCredentials:!0,headers:{"Content-Type":"application/json",Token:i.Token}}).success(function(o,t,n,l){o.error?e.msg=o.error:location.href="/GPS2/list/listAdminClub"}).error(function(o,t,n,l){e.msg="network error "+t})},e.updateOverviewNote=function(){r({method:"POST",url:l.get("adminApi.endpoint")+"/updateOverviewNote",data:JSON.stringify({clubId:{id:e.club.id.id},overviewNote:e.overviewNote}),withCredentials:!0,headers:{"Content-Type":"application/json",Token:i.Token}}).success(function(o,t,n,l){o.error?e.msg=o.error:e.msg="save success"})},e.startProcess=function(){var o="Processing.";e.processTimer=setInterval(function(){o+=".",e.msg=o},200)},e.stopProcess=function(){clearInterval(e.processTimer)},e.showMissingPin=function(o,t){var n=e.club.holeSet2Infos[o],l=e.club.holes[n.holeIndexes[t]].geoPoints,s=e.club.geoPoint;return l[0].longitude===s.longitude||l[1].longitude===s.longitude||l[2].longitude===s.longitude||l[3].longitude===s.longitude||l[4].longitude===s.longitude||l[6].longitude===s.longitude||l[7].longitude===s.longitude||l[8].longitude===s.longitude?!0:void 0},e.clearPin=function(o,t){var n=window.confirm("Are you sure to clear pin?");if(n===!0){var l=e.club.holeSet2Infos[o],s=e.club.holes[l.holeIndexes[t]].geoPoints,a=e.club.geoPoint;s[0].longitude=a.longitude,s[1].longitude=a.longitude,s[2].longitude=a.longitude,s[3].longitude=a.longitude,s[4].longitude=a.longitude,s[6].longitude=a.longitude,s[7].longitude=a.longitude,s[8].longitude=a.longitude,s[0].latitude=a.latitude,s[1].latitude=a.latitude,s[2].latitude=a.latitude,s[3].latitude=a.latitude,s[4].latitude=a.latitude,s[6].latitude=a.latitude,s[7].latitude=a.latitude,s[8].latitude=a.latitude,e.showMissingPin(o,t),e.myMaps[o].setCenter(e.clubLatLng),e.myMaps[o].setZoom(16)}},e.holes=[],e.holeSetSelection=[],e.marker={},e.myMaps=[],e.gpsMarkers=[],e.isNewHoleSet=[],e.missPin=[],e.onProjection=function(o){e.myMaps[o]=this.myMap,e.holeClick(o,1);var t=angular.element(".category")[o],n=angular.element(t).children()[0];angular.element(n).addClass("bg-primary")},e.distance=function(e,o){var t=6371e3,n=(o.latitude-e.lat())*Math.PI/180,l=(o.longitude-e.lng())*Math.PI/180,s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(o.latitude*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),a=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),r=t*a*1.09361;return Math.ceil(r)},e.distance2=function(e,o){var t=6378137,n=(o.latitude-e.latitude)*Math.PI/180,l=(o.longitude-e.longitude)*Math.PI/180,s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.latitude*Math.PI/180)*Math.cos(o.latitude*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),a=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),r=t*a*1.09361;return Math.ceil(r)};var h={url:""};e.showTeeMarker=function(o,t,n){"undefined"==typeof o.teeMarker&&(h.url="/GPS2/static/assets/static/tee.png",o.teeMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"Tee Marker"}),google.maps.event.addListener(o.teeMarker,"drag",function(n){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[0].latitude=n.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[0].longitude=n.latLng.lng();var l=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[1]),s=e.distance2(e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[1],e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]),a=l+s;m.setContent("To GC: "+s+"yd <br> To Tee: "+l+"yd <br>Total: "+a+"yd"),f.setContent("To FC: "+l+"yd"),e.showYardages[t]&&f.open(e.myMaps[t],o.teeMarker)}))},e.showGreenFrontMarker=function(o,t,n){"undefined"==typeof o.greenFrontMarker&&(h.url="/GPS2/static/assets/static/red.png",o.greenFrontMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"Green Front Marker"}),google.maps.event.addListener(o.greenFrontMarker,"dragend",function(o){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[2].latitude=o.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[2].longitude=o.latLng.lng()}))},e.showGreenMarker=function(o,t,n){"undefined"==typeof o.greenMarker&&(h.url="/GPS2/static/assets/static/orange.png",o.greenMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"Green Center Marker"}),google.maps.event.addListener(o.greenMarker,"drag",function(n){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3].latitude=n.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3].longitude=n.latLng.lng();var l=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[1]),s=e.distance2(e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[1],e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[0]),a=l+s;p.setContent("To FC: "+l+"yd"),m.setContent("To GC: "+l+"yd <br> To Tee: "+s+"yd <br>Total: "+a+"yd"),e.showYardages[t]&&p.open(e.myMaps[t],o.greenMarker)}))},e.showGreenBackMarker=function(o,t,n){"undefined"==typeof o.greenBackMarker&&(h.url="/GPS2/static/assets/static/blue.png",o.greenBackMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"Green Back Marker"}),google.maps.event.addListener(o.greenBackMarker,"dragend",function(o){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[4].latitude=o.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[4].longitude=o.latLng.lng()}))},e.showCenterMarker=function(o,t,n){"undefined"==typeof o.centerMarker&&(h.url="/GPS2/static/assets/static/center.png",o.centerMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"Center Marker"}),google.maps.event.addListener(o.centerMarker,"drag",function(n){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[1].latitude=n.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[1].longitude=n.latLng.lng();var l=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]),s=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[0]),a=l+s;f.setContent("To FC: "+s+"yd"),p.setContent("To FC: "+l+"yd"),m.setContent("To GC: "+l+"yd <br> To Tee: "+s+"yd <br>Total: "+a+"yd"),e.showYardages[t]&&m.open(e.myMaps[t],o.centerMarker)}))},e.showFifthMarker=function(o,t,n){"undefined"==typeof o.fifthMarker&&(h.url="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=5|FFFFFF|000000",o.fifthMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"attack reference 50"}),google.maps.event.addListener(o.fifthMarker,"drag",function(n){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[6].latitude=n.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[6].longitude=n.latLng.lng();var l=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]);b.setContent("To GC: "+l+"yd"),e.showYardages[t]&&b.open(e.myMaps[t],o.fifthMarker)}),google.maps.event.addListener(o.fifthMarker,"click",function(n){var l=e.distance2(e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[6],e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]);b.setContent("To GC: "+l+"yd"),e.showYardages[t]&&b.open(e.myMaps[t],o.fifthMarker)}))},e.showHundredMarker=function(o,t,n){"undefined"==typeof o.hundredMarker&&(h.url="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=10|FFFFFF|000000",o.hundredMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"attack reference 100"}),google.maps.event.addListener(o.hundredMarker,"drag",function(n){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[7].latitude=n.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[7].longitude=n.latLng.lng();var l=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]);I.setContent("To GC: "+l+"yd"),e.showYardages[t]&&I.open(e.myMaps[t],o.hundredMarker)}),google.maps.event.addListener(o.hundredMarker,"click",function(n){var l=e.distance2(e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[7],e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]);I.setContent("To GC: "+l+"yd"),e.showYardages[t]&&I.open(e.myMaps[t],o.hundredMarker)}))},e.showHundredfifthMarker=function(o,t,n){"undefined"==typeof o.hundredfifthMarker&&(h.url="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=15|FFFFFF|000000",o.hundredfifthMarker=new google.maps.Marker({position:n,map:e.myMaps[t],icon:h,draggable:!0,title:"attack reference 150"}),google.maps.event.addListener(o.hundredfifthMarker,"drag",function(n){e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[8].latitude=n.latLng.lat(),e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[8].longitude=n.latLng.lng();var l=e.distance(n.latLng,e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]);v.setContent("To GC: "+l+"yd"),e.showYardages[t]&&v.open(e.myMaps[t],o.hundredfifthMarker)}),google.maps.event.addListener(o.hundredfifthMarker,"click",function(n){var l=e.distance2(e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[8],e.club.holes[e.club.holeSet2Infos[t].holeIndexes[e.holes[t].number]].geoPoints[3]);v.setContent("To GC: "+l+"yd"),e.showYardages[t]&&v.open(e.myMaps[t],o.hundredfifthMarker)}))},e.mapOverview=function(o){var t={center:new google.maps.LatLng(e.club.geoPoint.latitude,e.club.geoPoint.longitude),zoom:16,tilt:0,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.SATELLITE,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}},n={geodesic:!0,strokeColor:"#FFFFFF",strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:2},offset:"0",repeat:"20px"}]},l=[],s=[],a=[],r=e.club.holeSet2Infos[o].holeIndexes.length,i=new google.maps.LatLngBounds;l[o]=new google.maps.Map(document.getElementsByClassName("map-overviews")[o],t),e.clubLatLng=new google.maps.LatLng(e.club.geoPoint.latitude,e.club.geoPoint.longitude),s.push(new google.maps.Marker({position:e.clubLatLng,map:l[o],icon:"/GPS2/static/assets/static/tr.png",animation:google.maps.Animation.DROP}));for(var u=0;r>u;u++){var d=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[0],c=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[1],g=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[3],h=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[2],f=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[4],p=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[6],m=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[7],b=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[u]].geoPoints[8],I=u+1,v="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld="+I+"|FF0000|FFFFFF";if(d.latitude!==e.club.geoPoint.latitude&&c.latitude!==e.club.geoPoint.latitude&&h.latitude!==e.club.geoPoint.latitude&&g.latitude!==e.club.geoPoint.latitude&&f.latitude!==e.club.geoPoint.latitude&&p.latitude!==e.club.geoPoint.latitude&&m.latitude!==e.club.geoPoint.latitude&&b.latitude!==e.club.geoPoint.latitude){s.push(new google.maps.Marker({position:new google.maps.LatLng(d.latitude,d.longitude),map:l[o],icon:"/GPS2/static/assets/static/tee.png",animation:google.maps.Animation.DROP})),s.push(new google.maps.Marker({position:new google.maps.LatLng(c.latitude,c.longitude),map:l[o],icon:v,animation:google.maps.Animation.DROP})),s.push(new google.maps.Marker({position:new google.maps.LatLng(g.latitude,g.longitude),map:l[o],icon:"/GPS2/static/assets/static/orange.png",animation:google.maps.Animation.DROP}));var M=new google.maps.LatLng(d.latitude,d.longitude),S=new google.maps.LatLng(c.latitude,c.longitude),k=new google.maps.LatLng(g.latitude,g.longitude);a[u]=a[u]||new google.maps.Polyline(n),a[u].setMap(null),a[u].setPath([M,S,k]),a[u].setMap(l[o])}for(var y in s){var w=s[y].position;i.extend(w)}l[o].fitBounds(i)}};var f=new google.maps.InfoWindow,p=new google.maps.InfoWindow,m=new google.maps.InfoWindow,b=new google.maps.InfoWindow,I=new google.maps.InfoWindow,v=new google.maps.InfoWindow;e.showYardages=[],e.holeClick=function(o,t){e.mapOverview(o),e.showMissingPin(o,t);var n={center:new google.maps.LatLng(e.club.geoPoint.latitude,e.club.geoPoint.longitude),zoom:16,tilt:0,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.SATELLITE,streetViewControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}};f.close(),p.close(),m.close(),b.close(),I.close(),v.close(),$(".custom-map-ck").eq(o).bind("change",function(){$(this).is(":checked")?e.showYardages[o]=!0:(e.showYardages[o]=!1,f.close(),p.close(),m.close(),b.close(),I.close(),v.close())}),e.clubLatLng=new google.maps.LatLng(e.club.geoPoint.latitude,e.club.geoPoint.longitude);var l=e.club.holes[e.club.holeSet2Infos[o].holeIndexes[t]].geoPoints;"undefined"==typeof e.holes[o]&&(e.holes[o]={}),e.holes[o].number=t,e.holeIndex=t;var s="",a="",r="",i="",u="",d="",c="",g="";"undefined"!=typeof l&&(l[2].latitude&&l[2].longitude&&(s=new google.maps.LatLng(l[2].latitude,l[2].longitude)),
l[4].latitude&&l[4].longitude&&(a=new google.maps.LatLng(l[4].latitude,l[4].longitude)),l[3].latitude&&l[3].longitude&&(r=new google.maps.LatLng(l[3].latitude,l[3].longitude)),l[1].latitude&&l[1].longitude&&(i=new google.maps.LatLng(l[1].latitude,l[1].longitude)),l[0].latitude&&l[0].longitude&&(g=new google.maps.LatLng(l[0].latitude,l[0].longitude)),l[6].latitude&&l[6].longitude&&(u=new google.maps.LatLng(l[6].latitude,l[6].longitude)),l[7].latitude&&l[7].longitude&&(d=new google.maps.LatLng(l[7].latitude,l[7].longitude)),l[8].latitude&&l[8].longitude&&(c=new google.maps.LatLng(l[8].latitude,l[8].longitude))),e.gpsMarkers[o]=e.gpsMarkers[o]||{};var h=e.gpsMarkers[o];e.showTee?e.showTee.push(!0):e.showTee=[!0],e.showCenter?e.showCenter.push(!0):e.showCenter=[!0],e.showGreenFront?e.showGreenFront.push(!0):e.showGreenFront=[!0],e.showGreenMiddle?e.showGreenMiddle.push(!0):e.showGreenMiddle=[!0],e.showGreenBack?e.showGreenBack.push(!0):e.showGreenBack=[!0],e.showWindow?e.showWindow.push(e.showTee[o]||e.showCenter[o]||e.showGreenFront[o]||e.showGreenMiddle[o]||e.showGreenBack[o]):e.showWindow=[e.showTee[o]||e.showCenter[o]||e.showGreenFront[o]||e.showGreenMiddle[o]||e.showGreenBack[o]],e.myMaps[o]||(e.myMaps[o]=new google.maps.Map(document.getElementsByClassName("map-canvas")[o],n));var M=new google.maps.LatLngBounds,S=new google.maps.Polyline(e.lineOptions);if(s.lat()===a.lat()||a.lat()===r.lat()||r.lat()===i.lat()||i.lat()===g.lat()||g.lat()===u.lat()||u.lat()===d.lat()||d.lat()===c.lat())e.clubLatLng?e.myMaps[o].setCenter(e.clubLatLng):null,e.myMaps[o].setZoom(16),e.isNewHoleSet[o]=!0,e.missPin[t]=!0,h.teeMarker&&(h.teeMarker.setMap(null),delete h.teeMarker),h.greenFrontMarker&&(h.greenFrontMarker.setMap(null),delete h.greenFrontMarker),h.greenMarker&&(h.greenMarker.setMap(null),delete h.greenMarker),h.greenBackMarker&&(h.greenBackMarker.setMap(null),delete h.greenBackMarker),h.centerMarker&&(h.centerMarker.setMap(null),delete h.centerMarker),h.fifthMarker&&(h.fifthMarker.setMap(null),delete h.fifthMarker),h.hundredMarker&&(h.hundredMarker.setMap(null),delete h.hundredMarker),h.hundredfifthMarker&&(h.hundredfifthMarker.setMap(null),delete h.hundredfifthMarker),void 0!==e.lines&&void 0!==e.lines[o]&&e.lines[o].setMap(null),e.addNewTeeMark=function(o){var t=e.myMaps[o].getCenter();e.showTeeMarker(h,o,t),void 0!==h.teeMarker&&void 0!==h.centerMarker&&void 0!==h.greenMarker&&e.drawLines(o,[g,i,r],[h.teeMarker,h.centerMarker,h.greenMarker],e.myMaps[o],S)},e.addNewGreenFrontMarker=function(o){var t=e.myMaps[o].getCenter();e.showGreenFrontMarker(h,o,t)},e.addNewGreenMarker=function(o){var t=e.myMaps[o].getCenter();e.showGreenMarker(h,o,t),void 0!==h.teeMarker&&void 0!==h.centerMarker&&void 0!==h.greenMarker&&e.drawLines(o,[g,i,r],[h.teeMarker,h.centerMarker,h.greenMarker],e.myMaps[o],S)},e.addNewGreenBackMarker=function(o){var t=e.myMaps[o].getCenter();e.showGreenBackMarker(h,o,t)},e.addNewCenterMarker=function(o){var t=e.myMaps[o].getCenter();e.showCenterMarker(h,o,t),void 0!==h.teeMarker&&void 0!==h.centerMarker&&void 0!==h.greenMarker&&e.drawLines(o,[g,i,r],[h.teeMarker,h.centerMarker,h.greenMarker],e.myMaps[o],S)},e.addNewFifthMarker=function(o){var t=e.myMaps[o].getCenter();e.showFifthMarker(h,o,t)},e.addNewHundredMarker=function(o){var t=e.myMaps[o].getCenter();e.showHundredMarker(h,o,t)},e.addNewHundredfifthMarker=function(o){var t=e.myMaps[o].getCenter();e.showHundredfifthMarker(h,o,t)};else{e.isNewHoleSet[o]=!1,e.showTeeMarker(h,o,g),e.showGreenFrontMarker(h,o,s),e.showGreenMarker(h,o,r),e.showGreenBackMarker(h,o,a),e.showCenterMarker(h,o,i),e.showFifthMarker(h,o,u),e.showHundredMarker(h,o,d),e.showHundredfifthMarker(h,o,c),s&&(e.showGreenFront[o]=!1,M.extend(s),h.greenFrontMarker.setPosition(s)),a&&(e.showGreenBack[o]=!1,M.extend(a),h.greenBackMarker.setPosition(a)),g&&(e.showTee[o]=!1,M.extend(g),h.teeMarker.setPosition(g)),r&&(e.showGreenMiddle[o]=!1,M.extend(r),h.greenMarker.setPosition(r)),i&&(e.showCenter[o]=!1,M.extend(i),h.centerMarker.setPosition(i)),u&&(M.extend(u),h.fifthMarker.setPosition(u)),d&&(M.extend(d),h.hundredMarker.setPosition(d)),c&&(M.extend(c),h.hundredfifthMarker.setPosition(c)),e.myMaps[o].fitBounds(M);var k;if(s||a||g||r||i||!e.clubLatLng){if(!e.showWindow)return;k=M.getCenter()}else k=e.clubLatLng;s||(s=k,h.greenFrontMarker.setPosition(k),M.extend(k)),a||(a=k,h.greenBackMarker.setPosition(k),M.extend(k)),g||(g=k,h.teeMarker.setPosition(k),M.extend(k)),r||(r=k,h.greenMarker.setPosition(k),M.extend(k)),i||(i=k,h.centerMarker.setPosition(k),M.extend(k)),e.drawLines(o,[g,i,r],[h.teeMarker,h.centerMarker,h.greenMarker],e.myMaps[o],S),e.myMaps[o].fitBounds(M)}},e.lineOptions={geodesic:!0,strokeColor:"#fff",strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:2},offset:"0",repeat:"20px"}]},e.drawLines=function(o,t,n,l,s){e.lines?null:e.lines=[],e.lines[o]=e.lines[o]||s,e.lines[o].setPath(t),e.lines[o].setMap(l),n.forEach(function(n,l){google.maps.event.addListener(n,"drag",function(n){t[l]=n.latLng,e.lines[o].setPath(t)})})}}).directive("holeIndex1",function(e){return{restrict:"A",scope:{index:"="},link:function(o,t,n){t.bind("click",function(){t.parents(".category").find("li").each(function(e){$(this).removeClass("active")}),t.parent().addClass("active")}),0===o.index&&e(function(){t.trigger("click")},500)}}}).directive("checkChange",function(){return{restrict:"A",link:function(e,o,t){o.bind("focus",function(){o.data("init")||o.data("init","").unbind("focus")}).bind("change",function(){var e=angular.element(this),o=e.data("init"),t=e.val(),n=e.parent().parent().find("label");o!==t?(n.addClass("dataChanged"),n.bind("mouseenter",function(){n.addClass("labelMouseIn")}).bind("mouseleave",function(){n.removeClass("labelMouseIn")}).bind("click",function(){e.val(o),n.removeClass("dataChanged labelMouseIn")})):(n.removeClass("dataChanged"),n.unbind())})}}}).directive("inputChange",function(){return{restrict:"A",link:function(e,o,t){o.bind("focus",function(){o.data("init")||o.data("init","").unbind("focus")}).bind("change",function(){var e=angular.element(this),o=e.data("init")+"",t=e.val();o!==t?e.addClass("dataChanged"):e.removeClass("dataChanged")})}}}).filter("isSelected",function(){return function(e,o){return-1!==o.indexOf(e)?!0:!1}}).filter("sex",function(){return function(e,o){for(var t=[],n=0;"undefined"!=typeof e&&n<e.length;n++){var l=e[n];l.gender===o&&t.push(l)}return t}}).filter("holeSet",function(){return function(e,o){for(var t=[],n=0;n<e.length;n++){var l=e[n];l[0]===o&&t.push(l)}return t}}).filter("HoleSetFilter",function(){return function(e,o,t){for(var n=[],l=0;"undefined"!=typeof e&&l<e.length;l++)"undefined"!=typeof e[l]&&""!==e[l]&&e[l].name!==o&&e[l].name!==t&&n.push(e[l]);return n}}).filter("toArray",function(){return function(e){var o=[];return angular.forEach(e,function(e,t){o.push(e)}),o}}).filter("clubDataFilter",function(){return function(e,o,t){return e?e:o?o:""}}).factory("clubConf",function(){return{flagType:{0:"mat driving range",1:"putting green",2:"chipping green",3:"practice bunker",4:"golf cart",5:"pull cart",6:"golf club rental",7:"club fitting",8:"pro shop",9:"golf lessons",10:"caddie hire",11:"restaurant",12:"receptions",13:"changing room",14:"locker room",15:"lodging",16:"grass driving range"}}});